<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>System operations over seven centuries &mdash; Martin Kleppmann&rsquo;s blog</title>
    <link rel="stylesheet" type="text/css" media="screen, print, handheld" href="/css/typography.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/style.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/pygments-default.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/ansi2html.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/customizations.css?4" />
<!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/ie.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/martinkl?format=xml" title="Martin Kleppmann's blog" />

</head>

<body class="wordpress">
    <div id="page">
        <p id="top">
    <a id="to-content" href="#content" title="Skip to content">Skip to content</a>
</p>

<div id="header">
    <div class="wrapper">
        <strong id="blog-title">
            <a href="/" title="Home" rel="home">Martin Kleppmann</a>
        </strong>
    </div>
</div>

<div id="sub-header">
    <div class="wrapper">
        <div id="navigation">
            <ul>
                <li class="page_item"><a href="/contact.html" title="About/Contact">About/Contact</a></li>
            </ul>
        </div>
    </div>
</div>

<hr class="divider">


        <div class="wrapper">
            <div id="content">
                <a class="twitter-share-button" href="https://twitter.com/share" data-text="System operations over seven centuries"
                    data-via="martinkl" data-related="martinkl" data-size="large" data-count="none">Tweet</a>

                <h1>System operations over seven centuries</h1>

                <p>On a <a href="http://www.planetoutdoor.de/de/touren/detail.htm?tour=20874&amp;region=138">walk</a> in the Alps last
week we came across a wonderful piece of engineering, more successful than most software systems
could claim to be. It is the system of <em><a href="http://de.wikipedia.org/wiki/Waal_%28Bew%C3%A4sserung%29">Waale</a></em>,
an ancient irrigation system in the <a href="http://en.wikipedia.org/wiki/Vinschgau">Vinschgau</a>, South
Tyrol.</p>

<p>The climate in the Vinschgau is sunny, dry and windy. Without irrigation, agriculture would barely
be possible, but if water from mountain streams is channelled to the fields,
<a href="http://www.vip.coop/">apple trees</a> and meadows can flourish. The area has been inhabited at least
since the Bronze Age, and it is likely that artificial irrigation started early. The oldest
documents on the Waal system date from the 12th century, and some Waale built in the 14th century
are still in use today.</p>

<p>
  <a style="display: block; float: left" href="http://www.flickr.com/photos/martinkleppmann/9485964300/in/set-72157635017969591"><img src="/2013/08/leitenwaal-1.jpg" width="250" height="375" /></a>
  <a style="display: block; float: right" href="http://www.flickr.com/photos/martinkleppmann/9482339202/in/set-72157635017969591"><img src="/2013/08/leitenwaal-2.jpg" width="250" height="375" /></a>
</p>
<p style="clear: both"></p>

<p>The pictures in this post show the Leitenwaal and the
<a href="http://www.youtube.com/watch?v=hO0BAjPh5n4">Berkwaal</a> near the village of
<a href="http://en.wikipedia.org/wiki/Schluderns">Schluderns</a> in South Tyrol, northern Italy. These two
conduits carry water from a mountain stream (the Saldurbach) to the fields and meadows around
Schluderns. Along their combined length of about six kilometers, they overcome many obstacles:
twisting along the face of steep mountainsides, crossing aqueducts over deep ravines, tunnelling
underneath boulders, before they finally arrive at the fields they supply.</p>

<p>Some sections look almost like a natural stream – except that they flow across the mountainside,
not down, because they are designed to cover the greatest possible distance with the smallest
possible loss in altitude. Other sections are more obviously artificial, where the furrow has been
lined with flat stones or blanks of wood.</p>

<p>This system was originally built almost 700 years ago, using the technology available at the time:
spade, axe, hammer and chisel. Of course, nowadays, electric pumps can take water from the river
at the valley floor, and sprinkle it on the fields on the slopes above. But for many centuries, the
only feasible option was to take water from a stream at high altitude, and let it flow down from
there.</p>

<p><a href="http://www.flickr.com/photos/martinkleppmann/9483183131/in/set-72157635017969591"><img src="/2013/08/source.jpg" width="550" height="366" /></a></p>

<p>Here a feed of water is taken from a stream, and carried along a wooden gulley: the input to the
irrigation system. Along the way, gates regulate the flow of water in the direction of various
farms. For centuries, the details of water distribution – how much water shall be directed towards
which farm at which time – have been governed by detailed agreements, and led to many disputes
between farmers.</p>

<p><a href="http://www.flickr.com/photos/martinkleppmann/9482379264/in/set-72157635017969591"><img src="/2013/08/distribution.jpg" width="550" height="366" /></a></p>

<p>If the system were to fail for too long, crops would wither, so it was important that the system was
always well-maintained and operational. And of course, parts of the system would fail from time to
time – erosion, landslides, decay, accidents or any number of other faults could occur. When a part
of the system broke, it was replaced using whatever technology was available at the time.</p>

<p>Thus, the system is now a patchwork of different water-carrying technologies from different ages.
The oldest “pipes” were made from hollowed-out tree trunks, and some of them are still in use (water
flows through tree trunks across a ravine in the left picture below). Later replacements have been
made with concrete, steel or plastic pipes – whatever is believed to be the most reliable solution
in the long term.</p>

<p>
  <a style="display: block; float: left" href="http://www.flickr.com/photos/martinkleppmann/9485976696/in/set-72157635017969591"><img src="/2013/08/pipes-1.jpg" width="250" height="375" /></a>
  <a style="display: block; float: right" href="http://www.flickr.com/photos/martinkleppmann/9485971172/in/set-72157635017969591"><img src="/2013/08/pipes-2.jpg" width="250" height="375" /></a>
</p>
<p style="clear: both"></p>

<p>Perhaps the most impressive aspect of this system are its <em>operability</em> features, i.e. the things
that help the operator of the Waal in his job of keeping the system running smoothly. For example,
at regular intervals, the water flows through gratings which filter out twigs or other objects
before they can cause blockages in pipes. The gratings are cleaned regularly, and tools for clearing
out pipes are kept near the Waal. Routine inspections help detect problems early, before they
escalate and cause further damage.</p>

<p>After heavy rainfall or melting of snow, the influx of water may exceed the Waal’s capacity. This is
problematic: if the Waal bursts its banks, those banks would be damaged by erosion or washed away,
making the problem much worse. Thus, the system includes overflow points at which water is
channelled back into the natural stream if the Waal is over capacity (left photo below).</p>

<p>There is even an ingenious monitoring system (right photo below). A waterwheel is placed in the
stream, and a cowbell is attached so that it rings on each rotation of the wheel
(<a href="http://www.youtube.com/watch?v=LbCG8AUJKSk">video</a>). Thus, the operator can tell the rate of water
flow from a distance, simply by listening for the rhythm of the bell.</p>

<p>
  <a style="display: block; float: left" href="http://www.flickr.com/photos/martinkleppmann/9483176701/in/set-72157635017969591"><img src="/2013/08/operations-1.jpg" width="250" height="375" /></a>
  <a style="display: block; float: right" href="http://www.flickr.com/photos/martinkleppmann/9485968436/in/set-72157635017969591"><img src="/2013/08/operations-2.jpg" width="250" height="375" /></a>
</p>
<p style="clear: both"></p>

<p>The <em>Waaler</em>, the operator in charge of maintenance of the <em>Waal</em>, is an important and
highly-regarded member of the local community. Traditionally, this role is elected every year on the
first Sunday of Lent. The operator can be re-elected by the community if they were satisfied with
his work in the previous year.</p>

<p>Looking at the lessons from this ancient irrigation system, and adapting them to software systems,
my take-aways are:</p>

<ul>
  <li>Good interface design can survive through multiple generations of technology. A stream of water,
flowing downhill, is a simple interface that can be implemented in stone-lined furrows,
hollowed-out tree trunks, concrete, steel and plastic pipes, and more.</li>
  <li>When replacing obsolete technology with new technology, some work is required to join them up –
two pieces of standardised plastic piping may fit snugly, but you can’t expect the same from a
hollow tree trunk interfacing with a plastic pipe.</li>
  <li>New technology is not necessarily better than old technology. Hollow tree trunks are still used
to feed water into 21st-century sprinkler irrigation systems.</li>
  <li>API rate limits are not a new thing.</li>
  <li>Continuously monitor the health of your system, and detect problems early.</li>
  <li>Operations doesn’t just happen; it has to be someone’s job.</li>
  <li>If a system solves an important problem, is well-engineered and well-operated, it can stick around
for a very, very long time.</li>
</ul>


                

                <div id="disqus_thread"></div>
            </div>

            <div id="sidebar">
                <div id="carrington-subscribe" class="widget">
    <h2 class="widget-title">Subscribe</h2>
    <a class="feed" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/martinkl">
        Site <acronym title="Really Simple Syndication">RSS</acronym> feed
    </a>

    <div id="mc_embed_signup">
        <p>
            To get notified when I write something new,
            <a href="https://twitter.com/martinkl">follow me</a> on Twitter,
            <a href="http://feeds.feedburner.com/martinkl">subscribe</a> to the RSS feed,
            or enter your email address:
        </p>

        <form action="//kleppmann.us2.list-manage.com/subscribe/post?u=9a1adaf549282981a96e171d1&amp;id=4543b695f6"
            method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
            <fieldset>
                <div class="mc-field-group">
                    <label for="mce-EMAIL">Email address:</label>
                    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
                </div>
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_9a1adaf549282981a96e171d1_4543b695f6" tabindex="-1" value=""></div>
            </fieldset>
        </form>

        <p class="disclaimer">
            I won't give your address to anyone else, won't send you any spam, and you can unsubscribe at any time.
        </p>
    </div>
</div>

<div id="primary-sidebar">
    <div id="book-promo" class="widget">
        <h2 class="title">My book</h2>
        <p><a href="http://www.anrdoezrs.net/click-7658334-11260198?url=http%3A%2F%2Fshop.oreilly.com%2Fproduct%2F0636920032175.do%3Fcmp%3Daf-strata-books-videos-product_cj_9781491903094_%2525zp&cjsku=0636920032175" target="_top"><img src="/images/book-cover-small.png" border="0" alt="Designing Data-Intensive Applications" width="180" height="236"/></a></p>
        <p>I'm writing a book for O'Reilly, called
        <a href="http://dataintensive.net">Designing Data-Intensive Applications</a>.</p>
    </div>

    <div id="tweets" class="widget">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/martinkl" data-widget-id="557543934298423296">Tweets by @martinkl</a>
    </div>
</div>

                


<div id="secondary-sidebar">
    <div class="widget">
        <h2 class="title">Recent posts</h2>
        <ul>
            
              <li>11 Oct 2015: <a href="/2015/10/11/recurse-center-joy-of-learning.html">The Recurse Center and the joy of learning</a></li>
            
              <li>05 Aug 2015: <a href="/2015/08/05/kafka-samza-unix-philosophy-distributed-data.html">Kafka, Samza, and the Unix philosophy of distributed data</a></li>
            
              <li>27 May 2015: <a href="/2015/05/27/logs-for-data-infrastructure.html">Using logs to build a solid data infrastructure (or: why dual writes are a bad idea)</a></li>
            
              <li>11 May 2015: <a href="/2015/05/11/please-stop-calling-databases-cp-or-ap.html">Please stop calling databases CP or AP</a></li>
            
              <li>23 Apr 2015: <a href="/2015/04/23/bottled-water-real-time-postgresql-kafka.html">Bottled Water: Real-time integration of PostgreSQL and Kafka</a></li>
            
            <li><a href="/archive.html">Full archive</a></li>
        </ul>
    </div>

    <div class="widget">
        <h2 class="title">Conference talks</h2>
        <ul>
            
              <li><a href="/2016/01/28/event-sourcing-stream-processing-at-ddd-europe.html">28 Jan 2016 at Domain Driven Design Europe</a></li>
            
              <li><a href="/2015/11/13/change-data-capture-at-all-your-base.html">13 Nov 2015 at All Your Base</a></li>
            
              <li><a href="/2015/11/06/streams-as-team-interface-at-oredev.html">06 Nov 2015 at Øredev</a></li>
            
              <li><a href="/2015/11/04/streams-crdts-databases-at-code-mesh.html">04 Nov 2015 at Code Mesh</a></li>
            
              <li><a href="/2015/10/30/stream-processing-patterns-at-crunch.html">30 Oct 2015 at Crunch Conference</a></li>
            
            <li><a href="/talks.html">Full archive</a></li>
        </ul>
    </div>
</div>

            </div>
        </div>

        <hr class="divider" />

<div id="footer">
    <div class="wrapper">
        <p id="generator-link">
            <a rel="license" href="http://creativecommons.org/licenses/by/3.0/"
                style="float: left; padding: 0.3em 1em 0 0;"><img alt="Creative Commons License"
                src="/images/creative-commons.png" width="88" height="31" /></a>
            Unless otherwise specified, all content on this site is licensed under a
            <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
                Attribution 3.0 Unported License</a>.
            Theme borrowed from
            <span id="theme-link"><a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a></span>,
            ported to <a href="https://github.com/mojombo/jekyll">Jekyll</a> by Martin Kleppmann.
        </p>
    </div>
</div>

<img src="https://www.lduhtrp.net/image-7658334-11260198" width="1" height="1" border="0"/>

    </div>

    <script type="text/javascript">
    var disqus_shortname = 'martinkl';
    var disqus_url = 'http://martin.kleppmann.com/2013/08/12/system-operations-over-seven-centuries.html';
    var disqus_identifier = disqus_url;

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

    <!-- Google Analytics -->
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-7958895-1");
        pageTracker._trackPageview();
    } catch (err) {}
</script>

<!-- Twitter -->
<script>
!function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
        p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {
        js = d.createElement(s);
        js.id = id;
        js.src = p + "://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
    }
}(document,"script","twitter-wjs");
</script>

</body>
</html>
